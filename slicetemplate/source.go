package slicetemplate

import (
	"encoding/base64"

	log "github.com/sirupsen/logrus"
)

const (
	module_makefile = "YWxsOgoJQGMrKyAtSS4gLWMge3suRmlsZX19LmNwcAoJQGFyIHJjcyBsaWJ7ey5GaWxlfX0uYSB7ey5GaWxlfX0ubwoJQHJtICoubwo="

	module_cpp = "I2luY2x1ZGUgPHN0cmluZz4KI2luY2x1ZGUgPHR5cGVpbmZvPgojaW5jbHVkZSA8R2xhY2llcjIvUm91dGVyLmg+CiNpbmNsdWRlIDxHbGFjaWVyMi9TZXNzaW9uLmg+CiNpbmNsdWRlIDxJY2UvSWNlLmg+CiNpbmNsdWRlIDx7ey5GaWxlfX0uaD4KI2luY2x1ZGUgInt7dG9sb3dlciAuSW50ZXJmYWNlfX1fd3JhcC5oIgoKdXNpbmcgbmFtZXNwYWNlIHN0ZDsKdXNpbmcgbmFtZXNwYWNlIHt7Lk1vZHVsZX19OwoKI2RlZmluZSBfSklDRV9JKG5hbWUpIHt7LkludGVyZmFjZX19IyNuYW1lCgp0eXBlZGVmIHN0cnVjdCBfSklDRShoYW5kbGVfcykgX0pJQ0UoaGFuZGxlX3QpOwpzdHJ1Y3QgX0pJQ0UoaGFuZGxlX3MpIHsKCUljZTo6Q29tbXVuaWNhdG9yUHRyIG1fcElDOwoJSWNlOjpPYmplY3RQcngJbV9wT2JqQmFzZTsKCV9KSUNFX0koUHJ4KQltX3BIYW5kbGU7Cn07CgojZGVmaW5lIF9fSlByb3h5X18oaGFuZGxlKSAJKCgoX0pJQ0UoaGFuZGxlX3QpKikoaGFuZGxlKSktPm1fcEhhbmRsZSkKI2RlZmluZSBfX0pJQ19fKGhhbmRsZSkgCSgoKF9KSUNFKGhhbmRsZV90KSopKGhhbmRsZSkpLT5tX3BJQykKCl9KSUNFKGNsaWVudF90KSBfSklDRShuZXdfY2xpZW50KShjaGFyKiBjb25maWcsIGNoYXIqIHByb3h5X25hbWUsIGludCB1c2VSb3V0ZXIpCnsKCV9KSUNFKGhhbmRsZV90KSAqY2xpZW50ID0gTlVMTDsKCglJY2U6OkluaXRpYWxpemF0aW9uRGF0YSBpbml0RGF0YTsKCWluaXREYXRhLnByb3BlcnRpZXMgPSBJY2U6OmNyZWF0ZVByb3BlcnRpZXMoKTsKCWluaXREYXRhLnByb3BlcnRpZXMtPmxvYWQoY29uZmlnKTsKCUljZTo6Q29tbXVuaWNhdG9yUHRyIHBpYyA9IEljZTo6aW5pdGlhbGl6ZShpbml0RGF0YSk7Cgl0cnkgewoJCUljZTo6T2JqZWN0UHJ4CWJhc2UgPSBwaWMtPnN0cmluZ1RvUHJveHkocHJveHlfbmFtZSk7CiAgICAgICAgICAgICAgICBpZiAodXNlUm91dGVyID4wICApewoJCQlHbGFjaWVyMjo6Um91dGVyUHJ4IHJvdXRlciA9IEdsYWNpZXIyOjpSb3V0ZXJQcng6OmNoZWNrZWRDYXN0KHBpYy0+Z2V0RGVmYXVsdFJvdXRlcigpKTsKCQkJcm91dGVyLT5jcmVhdGVTZXNzaW9uKCJhYmMiLCAiMTIzIik7CgkJCWJhc2UgPSBiYXNlLT5pY2Vfcm91dGVyKHJvdXRlcik7CiAgICAgICAgICAgICAgICB9CgkJX0pJQ0VfSShQcngpCWhhbmRsZSA9IF9KSUNFX0koUHJ4KTo6Y2hlY2tlZENhc3QoYmFzZSk7CgkJY2xpZW50ID0gbmV3IF9KSUNFKGhhbmRsZV90KTsKCQlpZiAoY2xpZW50KSB7CgkJCWNsaWVudC0+bV9wSUMgPSBwaWM7CgkJCWNsaWVudC0+bV9wT2JqQmFzZSA9IGJhc2U7CgkJCWNsaWVudC0+bV9wSGFuZGxlID0gaGFuZGxlOwoJCX0KCQllcnJubyA9IDA7Cgl9IGNhdGNoIChjb25zdCBJY2U6OkV4Y2VwdGlvbiYgZXgpIHsKCQlwcmludGYoImljZUV4Y2VwdGlvbjogJXNcbiIsIGV4LndoYXQoKSk7Cgl9IGNhdGNoIChjb25zdCBjaGFyKiBtc2cpIHsKCQlwcmludGYoIm90aGVyRXhjZXB0aW9uOiAlc1xuIiwgbXNnKTsKCX0KCXJldHVybiAoX0pJQ0UoY2xpZW50X3QpKWNsaWVudDsKfQoKdm9pZCBfSklDRShmcmVlX2NsaWVudCkoX0pJQ0UoY2xpZW50X3QpIGNsaWVudCkKewoJaWYgKF9fSklDX18oY2xpZW50KSkgewoJCV9fSklDX18oY2xpZW50KS0+ZGVzdHJveSgpOwoJfQoKCWRlbGV0ZSAoX0pJQ0UoaGFuZGxlX3QpKiljbGllbnQ7Cn0KCgpjbGFzcyBBc3luY0Nvb2tpZSA6IHB1YmxpYyBJY2U6OkxvY2FsT2JqZWN0CnsKCXB1YmxpYzoKCQlsb25nIGxvbmcgaW50IGdvSGFuZGxlOwp9OwoKdHlwZWRlZiBJY2VVdGlsOjpIYW5kbGU8QXN5bmNDb29raWU+IEFzeW5jQ29va2llUHRyOwoKY2xhc3MgQmFzZUNhbGxiYWNrIDogcHVibGljIEljZVV0aWw6OlNoYXJlZAp7CglwdWJsaWM6CgkJdm9pZCBTdWNjQ2IoY29uc3QgYnl0ZXMmIHJlc3VsdCwgY29uc3QgQXN5bmNDb29raWVQdHImIGNvb2tpZVB0cikKCQl7CgkJCV9jZ29fY2FsbGJhY2tfc3VjY2Vzcyhjb29raWVQdHItPmdvSGFuZGxlLCAoY2hhciopcmVzdWx0LmRhdGEoKSwgcmVzdWx0LnNpemUoKSk7CgkJfQoKCQl2b2lkIEZhaWxDYihjb25zdCBJY2U6OkV4Y2VwdGlvbiYgZXgsIGNvbnN0IEFzeW5jQ29va2llUHRyJiBjb29raWVQdHIpCgkJewoJCQlzdHJpbmcgc3RyRXJyTXNnOwoJCQlpZiAodHlwZWlkKGV4KSA9PSB0eXBlaWQoSWNlOjpUaW1lb3V0RXhjZXB0aW9uKSkKCQkJewoJCQkJc3RyRXJyTXNnID0gc3RyaW5nKCJpbmV0IHRpbWVvdXQiKTsKCQkJfQoJCQllbHNlIGlmICh0eXBlaWQoZXgpID09IHR5cGVpZChJY2U6Okludm9jYXRpb25UaW1lb3V0RXhjZXB0aW9uKSkKCQkJewoJCQkJc3RyRXJyTXNnID0gc3RyaW5nKCJpbnZvY2F0aW9uIHRpbWVvdXQiKTsKCQkJfQoJCQllbHNlIGlmICh0eXBlaWQoZXgpID09IHR5cGVpZChJY2U6OkROU0V4Y2VwdGlvbikpCgkJCXsKCQkJCXN0ckVyck1zZyA9IHN0cmluZygiRE5TIGVycm9yOiAiKSArIGV4LndoYXQoKTsKCQkJfQoJCQllbHNlCgkJCXsKCQkJCXN0ckVyck1zZyA9IHN0cmluZygidW5rbm93biBpY2UgZXJyb3I6ICIpICsgZXgud2hhdCgpOwoJCQl9CgoJCQlfY2dvX2NhbGxiYWNrX2ZhaWx1cmUoY29va2llUHRyLT5nb0hhbmRsZSwgKGNoYXIqKXN0ckVyck1zZy5jX3N0cigpKTsKCQl9Cn07Cgp7e3JhbmdlICRjdXJGdW5jIDo9IC5GdW5jdGlvbnN9fQp2b2lkIF9KSUNFKHt7JGN1ckZ1bmN9fSkoX0pJQ0UoY2xpZW50X3QpIGNsaWVudCwgY2hhciAqbXNnICwgdW5zaWduZWQgaW50IGxlbiwgbG9uZyBsb25nIGludCBnb0hhbmRsZSkKewogICAgICAgIEFzeW5jQ29va2llUHRyIHBDb29raWUgPSBuZXcgQXN5bmNDb29raWUoKTsKCXBDb29raWUtPmdvSGFuZGxlID0gZ29IYW5kbGU7CglfX0pQcm94eV9fKGNsaWVudCktPmJlZ2luX3t7JGN1ckZ1bmN9fShieXRlcyhtc2csIG1zZytsZW4pLCBuZXdDYWxsYmFja197eyQuSW50ZXJmYWNlfX1fe3skY3VyRnVuY319KG5ldyBCYXNlQ2FsbGJhY2soKSwgJkJhc2VDYWxsYmFjazo6U3VjY0NiLCAmQmFzZUNhbGxiYWNrOjpGYWlsQ2IpLCBwQ29va2llKTsKfQp7e2VuZH19Cg=="

	module_h = "I2lmbmRlZiBfX3t7Lk1vZHVsZX19X3t7LkludGVyZmFjZX19X1dSQVBfSF8KI2RlZmluZSBfX3t7Lk1vZHVsZX19X3t7LkludGVyZmFjZX19X1dSQVBfSF8KCiNpZmRlZiBfX2NwbHVzcGx1cwpleHRlcm4gIkMiIHsKI2VuZGlmCgojZGVmaW5lIF9KSUNFKG5hbWUpIHt7Lk1vZHVsZX19X3t7LkludGVyZmFjZX19XyMjbmFtZQoKdHlwZWRlZiB2b2lkKiBfSklDRShjbGllbnRfdCk7CgpleHRlcm4gX0pJQ0UoY2xpZW50X3QpIF9KSUNFKG5ld19jbGllbnQpKGNoYXIqIGNvbmZpZywgY2hhciogaXRlbSwgaW50IHVzZVJvdXRlcik7CgpleHRlcm4gdm9pZCBfSklDRShmcmVlX2NsaWVudCkoX0pJQ0UoY2xpZW50X3QpIGNsaWVudCk7Cgp7e3JhbmdlICRjdXJGdW5jIDo9IC5GdW5jdGlvbnN9fQpleHRlcm4gdm9pZCBfSklDRSh7eyRjdXJGdW5jfX0pKF9KSUNFKGNsaWVudF90KSBjbGllbnQsIGNoYXIgKm1zZyAsIHVuc2lnbmVkIGludCBsZW4sIGxvbmcgbG9uZyBpbnQgZ29IYW5kbGUpOwp7e2VuZH19CgpleHRlcm4gdm9pZCBfY2dvX2NhbGxiYWNrX3N1Y2Nlc3MobG9uZyBsb25nIGludCBoYW5kbGUsIGNoYXIgKmRhdGEsIHVuc2lnbmVkIGludCBzaXplKTsKZXh0ZXJuIHZvaWQgX2Nnb19jYWxsYmFja19mYWlsdXJlKGxvbmcgbG9uZyBpbnQgaGFuZGxlLCBjaGFyICptc2cpOwoKI2lmZGVmIF9fY3BsdXNwbHVzCn0KI2VuZGlmCgojZW5kaWYK"

	module_go = "cGFja2FnZSB7e3RvbG93ZXIgLkludGVyZmFjZX19CgovKgojY2dvIENQUEZMQUdTOiAtSS4ge3t3aXRoIC5Ub0NQUH19LUkuLi9pY2VfaW50ZXJmYWNle3tlbmR9fQojY2dvIExERkxBR1M6IC1MJHtTUkNESVJ9LyB7e3dpdGggLlRvQ1BQfX0tTCR7U1JDRElSfS8uLi9pY2VfaW50ZXJmYWNle3tlbmR9fSAtbHt7JC5GaWxlfX0gLWxzdGRjKysgLWxJY2UgLWxJY2VVdGlsIC1wdGhyZWFkIC1sSWNlR3JpZCAtbEdsYWNpZXIyCgojaW5jbHVkZSA8c3RkbGliLmg+CiNpbmNsdWRlIDx7e3RvbG93ZXIgLkludGVyZmFjZX19X3dyYXAuaD4KKi8KaW1wb3J0ICJDIgoKaW1wb3J0ICgKCSJmbXQiCgkicmVmbGVjdCIKCSJzeW5jIgoJInN5bmMvYXRvbWljIgoJInVuc2FmZSIKKQoKdHlwZSBjZ29Qb3RpbmVyIHN0cnVjdCB7CglidWYgIG1hcFtpbnQ2NF0qQ2FsbGJhY2sKCWxvY2sgc3luYy5NdXRleAoJcHRyICBpbnQ2NAp9Cgp2YXIgKAoJcG9pbnRlck1hbmFnZXIgY2dvUG90aW5lcgopCgpmdW5jIGluaXQoKSB7Cglwb2ludGVyTWFuYWdlci5idWYgPSBtYWtlKG1hcFtpbnQ2NF0qQ2FsbGJhY2spCn0KCmZ1bmMgKHAgKmNnb1BvdGluZXIpIHB1dChjYiAqQ2FsbGJhY2spIGludDY0IHsKCXAubG9jay5Mb2NrKCkKCWRlZmVyIHAubG9jay5VbmxvY2soKQoJbnB0ciA6PSBhdG9taWMuQWRkSW50NjQoJnAucHRyLCAxKQoJcC5idWZbbnB0cl0gPSBjYgoJcmV0dXJuIG5wdHIKfQoKZnVuYyAocCAqY2dvUG90aW5lcikgcG9wKHB0ciBpbnQ2NCkgKkNhbGxiYWNrIHsKCXAubG9jay5Mb2NrKCkKCWRlZmVyIHAubG9jay5VbmxvY2soKQoKCWNiLCBvayA6PSBwLmJ1ZltwdHJdCglpZiBvayB7CgkJZGVsZXRlKHAuYnVmLCBwdHIpCgl9CglyZXR1cm4gY2IKfQoKdHlwZSBQcm94eSBzdHJ1Y3QgewoJY2xpZW50IEMue3suTW9kdWxlfX1fe3suSW50ZXJmYWNlfX1fY2xpZW50X3QKfQoKZnVuYyBOZXdQcm94eShjb25maWcsIHByb3h5IHN0cmluZywgdXNlUm91dGVyIGJvb2wpICgqUHJveHksIGVycm9yKSB7Cgl0Q29uZmlnLCB0UHJveHkgOj0gQy5DU3RyaW5nKGNvbmZpZyksIEMuQ1N0cmluZyhwcm94eSkKCWRlZmVyIF9fZnJlZV9jc3RyaW5nX18odENvbmZpZywgdFByb3h5KQoKCXVzZVJvdXRlckkgOj0gMAoJaWYgdXNlUm91dGVyIHsKCQl1c2VSb3V0ZXJJID0gMQoJfQoJY2xpZW50LCBlcnIgOj0gQy57ey5Nb2R1bGV9fV97ey5JbnRlcmZhY2V9fV9uZXdfY2xpZW50KHRDb25maWcsIHRQcm94eSwgQy5pbnQodXNlUm91dGVySSkpCglpZiBlcnIgIT0gbmlsIHx8IGNsaWVudCA9PSBuaWwgewoJCXJldHVybiBuaWwsIGVycgoJfQoKCXJldHVybiAmUHJveHl7CgkJY2xpZW50OiBjbGllbnQsCgl9LCBuaWwKfQoKZnVuYyAocCAqUHJveHkpIENsb3NlKCkgZXJyb3IgewoJQy57ey5Nb2R1bGV9fV97ey5JbnRlcmZhY2V9fV9mcmVlX2NsaWVudChwLmNsaWVudCkKCXJldHVybiBuaWwKfQoKe3tyYW5nZSAkY3VyRnVuYyA6PSAuRnVuY3Rpb25zfX0KZnVuYyAocCAqUHJveHkpIHt7dG9nb2Z1bm5hbWUgJGN1ckZ1bmN9fShkYXRhIFtdYnl0ZSkgKFtdYnl0ZSwgZXJyb3IpIHsKCWNiIDo9IE5ld0NhbGxiYWNrKCkKCglfLCBlcnIgOj0gQy57eyQuTW9kdWxlfX1fe3skLkludGVyZmFjZX19X3t7JGN1ckZ1bmN9fShwLmNsaWVudCwKCQkoKkMuY2hhcikodW5zYWZlLlBvaW50ZXIoKCpyZWZsZWN0LlNsaWNlSGVhZGVyKSh1bnNhZmUuUG9pbnRlcigmZGF0YSkpLkRhdGEpKSwKCQkoQy51aW50KShsZW4oZGF0YSkpLAoJCShDLmxvbmdsb25nKShwb2ludGVyTWFuYWdlci5wdXQoY2IpKSwKCSkKCglpZiBlcnIgIT0gbmlsIHsKCQlyZXR1cm4gbmlsLCBlcnIKCX0KCglyZXR1cm4gY2IuRG9uZSgpCn0Ke3tlbmR9fQoKLy9leHBvcnQgX2Nnb19jYWxsYmFja19zdWNjZXNzCmZ1bmMgX2Nnb19jYWxsYmFja19zdWNjZXNzKGhhbmRsZSBpbnQ2NCwgZGF0YSAqQy5jaGFyLCBzaXplIEMudWludCkgewoJLy9mbXQuUHJpbnRmKCJoYW5kbGU6JXBcbiIsIGhhbmRsZSkKCWNiIDo9IHBvaW50ZXJNYW5hZ2VyLnBvcChoYW5kbGUpCglpZiBjYiAhPSBuaWwgewoJCWNiLnN1Y2Nlc3MoQy5Hb0J5dGVzKHVuc2FmZS5Qb2ludGVyKGRhdGEpLCAoQy5pbnQpKHNpemUpKSkKCX0KfQoKLy9leHBvcnQgX2Nnb19jYWxsYmFja19mYWlsdXJlCmZ1bmMgX2Nnb19jYWxsYmFja19mYWlsdXJlKGhhbmRsZSBpbnQ2NCwgbXNnICpDLmNoYXIpIHsKCS8vZm10LlByaW50ZigiaGFuZGxlOiVwXG4iLCBoYW5kbGUpCgljYiA6PSBwb2ludGVyTWFuYWdlci5wb3AoaGFuZGxlKQoJaWYgY2IgIT0gbmlsIHsKCQljYi5mYWlsdXJlKEMuR29TdHJpbmcobXNnKSkKCX0KfQoKdHlwZSBDYWxsYmFjayBzdHJ1Y3QgewoJZG9uZUNoIGNoYW4gW11ieXRlCgllcnJDaCAgY2hhbiBlcnJvcgp9CgpmdW5jIE5ld0NhbGxiYWNrKCkgKkNhbGxiYWNrIHsKCWNiIDo9IG5ldyhDYWxsYmFjaykKCWNiLmRvbmVDaCA9IG1ha2UoY2hhbiBbXWJ5dGUsIDEpCgljYi5lcnJDaCA9IG1ha2UoY2hhbiBlcnJvciwgMSkKCXJldHVybiBjYgp9CgpmdW5jIChjYiAqQ2FsbGJhY2spIERvbmUoKSAoW11ieXRlLCBlcnJvcikgewoJc2VsZWN0IHsKCWNhc2UgZGF0YSA6PSA8LWNiLmRvbmVDaDoKCQlyZXR1cm4gZGF0YSwgbmlsCgljYXNlIGVyciA6PSA8LWNiLmVyckNoOgoJCXJldHVybiBuaWwsIGVycgoJfQoJcmV0dXJuIG5pbCwgbmlsCn0KCmZ1bmMgKGNiICpDYWxsYmFjaykgc3VjY2VzcyhkYXRhIFtdYnl0ZSkgewoJY2IuZG9uZUNoIDwtIGRhdGEKfQoKZnVuYyAoY2IgKkNhbGxiYWNrKSBmYWlsdXJlKG1zZyBzdHJpbmcpIHsKCWNiLmVyckNoIDwtIGZtdC5FcnJvcmYoIiVzIiwgbXNnKQp9CgpmdW5jIF9fZnJlZV9jc3RyaW5nX18oYXJncyAuLi4qQy5jaGFyKSB7Cglmb3IgXywgYXJnIDo9IHJhbmdlIGFyZ3MgewoJCUMuZnJlZSh1bnNhZmUuUG9pbnRlcihhcmcpKQoJfQp9Cg=="
)

func source(src string) string {
	decoded, err := base64.StdEncoding.DecodeString(src)
	if err != nil {
		log.Println("decode error:", err)
		log.Println(src)
		return ""
	}
	return string(decoded)
}
